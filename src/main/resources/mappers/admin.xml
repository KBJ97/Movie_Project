<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cinema.admin.mapper.MovieMapper">

    <insert id="insertMovie">

        INSERT INTO movie SET
         movieName=#{movieName},
         director=#{director},
         actor= #{actor},
         runTime = #{runTime},
         openDate = #{openDate},
         movieAge = #{movieAge},
         cateNum = #{cateNum},
         screenType = #{screenType},
         thumb1 = #{thumb1},
         thumb2 = #{thumb2},
         thumb3 = #{thumb3},
         story = #{story}


    </insert>

    <insert id="insertFile">
        INSERT INTO cinemaFile (movieNum, newName, oriName, rdate)
        VALUES (#{movieNum}, #{newName}, #{oriName}, #{rdate})
    </insert>

    <select id="selectMovies" resultType="com.cinema.admin.dto.MovieDTO">
        SELECT a.*, b.`cateName`
        FROM `movie` a
        LEFT JOIN `cate` b ON a.cateNum = b.cateNum
        ORDER BY a.`movieNum` DESC
    </select>

    <select id="selectRegion1Ajax" resultType="com.cinema.admin.dto.RegionDTO">
        SELECT * FROM `region1`
    </select>


    <select id="selectRegion2Ajax" resultType="com.cinema.admin.dto.RegionDTO">
        SELECT a.*, b.region2Name
        FROM region1 a
        JOIN region2 b ON a.region1Num = b.region1Num
        WHERE a.region1Num = #{region1Num}
    </select>
</mapper>